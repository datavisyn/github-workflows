name: Release Repository

on: 
  workflow_call:
    inputs:
      known_repositories:
        description: "repositories, that are known in the datavisyn eco-system"
        required: true
        type: string

jobs:
  release-repository:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2       
      - id: checked_inputs
        name: echo inputs
        run: |
          echo $known_repositories
          echo ${{ github.event.repository.name }}
          $CHECKED_KNOWN_REPOS=$known_repositories | jq '.'
          $CHECKED_REPOSITORY=$known_repositories | jq '.${{ github.event.repository.name }}'
          echo $CHECKED_KNOWN_REPOS
          echo $CHECKED_REPOSITORY
          echo ::set-output name=known_repositories::${CHECKED_KNOWN_REPOS}
          echo ::set-output name=repository::${CHECKED_REPOSITORY}
        env:
          known_repositories: ${{ inputs.known_repositories}}  
       
      - name: read known repos
        run: |
          echo "read known repos"          
      - name: checkout Repo
        run: |
          echo "checkout repo"
      - name: create release branch
        run: |
          echo "create release branch"                  
      - name: changes for release
        run: |
          echo "changes for release" 
      - name: push branch
        run: |
          echo "push branch"
      - name: create release notes
        run: |
          echo "create release notes"
      - name: create pr
        run: |
          echo "create pr"           
      - name: merge pr
        run: |
          echo "merge pr"
      - name: get master branch
        run: |
          echo "get master branch"
      - name: create release and tag
        run: |
          echo "create release and tag"
      - name: merge master to develop
        run: |
          echo "merge master to develop"
      - name: prepare develop
        run: |
          echo "prepare develop"
      - name: push develop
        run: |
          echo "push develop" 
